{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';//import '../styles/navigation.css'\n//import '../styles/tables.css'\nimport{getPosts,getTopPosts}from'../services/posts';var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(){var _this;_classCallCheck(this,Posts);_this=_super.call(this);_this.state={posts:'',links:''};_this.fetchTopPosts=_this.fetchTopPosts.bind(_assertThisInitialized(_this));return _this;}_createClass(Posts,[{key:\"fetchPosts\",value:function(){var _fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getPosts,data,links;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(localStorage.getItem('token'));case 2:_yield$getPosts=_context.sent;data=_yield$getPosts.data;links=_yield$getPosts.links;_context.next=7;return this.setState({posts:Object.values(data),links:links});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function fetchPosts(){return _fetchPosts.apply(this,arguments);}return fetchPosts;}()},{key:\"fetchTopPosts\",value:function(){var _fetchTopPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getTopPosts,data,links;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('hola');_context2.next=3;return getTopPosts(localStorage.getItem('token'));case 3:_yield$getTopPosts=_context2.sent;data=_yield$getTopPosts.data;links=_yield$getTopPosts.links;_context2.next=8;return this.setState({posts:Object.values(data),links:links});case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchTopPosts(){return _fetchTopPosts.apply(this,arguments);}return fetchTopPosts;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchPosts();}},{key:\"render\",value:function render(){var _this2=this;var posts;if(this.state.posts){posts=this.state.posts.map(function(post,i){console.log(_this2.state.posts);return/*#__PURE__*/React.createElement(\"tbody\",{key:i},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,post.links.freelancer),/*#__PURE__*/React.createElement(\"td\",null,post.attributes.description),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"table-img\",src:post.attributes.media,alt:\"\"})),/*#__PURE__*/React.createElement(\"td\",null,post.attributes.likes)));});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Posts\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.fetchTopPosts},\" Top 10 (Likes)\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Freelancer\"),/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"Media\"),/*#__PURE__*/React.createElement(\"th\",null,\"Likes\"))),posts));}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/Users/nicorosenberg/Desktop/my-app/src/components/Posts.jsx"],"names":["React","Component","getPosts","getTopPosts","Posts","state","posts","links","fetchTopPosts","bind","localStorage","getItem","data","setState","Object","values","console","log","fetchPosts","map","post","i","freelancer","attributes","description","media","likes"],"mappings":"uzBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAEA;AACA;AACA,OAAQC,QAAR,CAAkBC,WAAlB,KAAqC,mBAArC,C,GAGMC,CAAAA,K,8FACF,gBAAa,uCACX,wBACA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,EADI,CAEXC,KAAK,CAAE,EAFI,CAAb,CAIA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CANW,aAOZ,C,uTAG+BP,CAAAA,QAAQ,CAACQ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,C,sCAA7BC,I,iBAAAA,I,CAAML,K,iBAAAA,K,uBACP,MAAKM,QAAL,CAAc,CAAEP,KAAK,CAAEQ,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAT,CAA8BL,KAAK,CAAEA,KAArC,CAAd,C,ibAGNS,OAAO,CAACC,GAAR,CAAY,MAAZ,E,uBAC4Bd,CAAAA,WAAW,CAACO,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,C,0CAAhCC,I,oBAAAA,I,CAAML,K,oBAAAA,K,wBACP,MAAKM,QAAL,CAAc,CAAEP,KAAK,CAAEQ,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAT,CAA8BL,KAAK,CAAEA,KAArC,CAAd,C,4NAGS,CACjB,KAAKW,UAAL,GACD,C,uCAEQ,iBACP,GAAIZ,CAAAA,KAAJ,CACA,GAAI,KAAKD,KAAL,CAAWC,KAAf,CAAqB,CACnBA,KAAK,CAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiBa,GAAjB,CAAqB,SAACC,IAAD,CAAOC,CAAP,CAAa,CACxCL,OAAO,CAACC,GAAR,CAAY,MAAI,CAACZ,KAAL,CAAWC,KAAvB,EACA,mBACE,6BAAQ,GAAG,CAAGe,CAAd,eACE,2CACE,8BAAKD,IAAI,CAACb,KAAL,CAAWe,UAAhB,CADF,cAEE,8BAAKF,IAAI,CAACG,UAAL,CAAgBC,WAArB,CAFF,cAGE,2CAAI,2BAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEJ,IAAI,CAACG,UAAL,CAAgBE,KAAhD,CAAuD,GAAG,CAAC,EAA3D,EAAJ,CAHF,cAIE,8BAAKL,IAAI,CAACG,UAAL,CAAgBG,KAArB,CAJF,CADF,CADF,CAUD,CAZO,CAAR,CAaD,CAED,mBACE,4CACE,sCADF,cAEE,8BAAQ,OAAO,CAAE,KAAKlB,aAAtB,oBAFF,cAIE,8CACE,8CACA,2CACE,2CADF,cAEE,4CAFF,cAGE,sCAHF,cAIE,sCAJF,CADA,CADF,CASGF,KATH,CAJF,CADF,CAkBD,C,mBA5DeL,S,EAgElB,cAAeG,CAAAA,KAAf","sourcesContent":["import React, {Component} from 'react';\n\n//import '../styles/navigation.css'\n//import '../styles/tables.css'\nimport {getPosts, getTopPosts} from  '../services/posts' \n\n\nclass Posts extends Component {\n    constructor(){\n      super()\n      this.state = {\n        posts: '',\n        links: '',\n      }\n      this.fetchTopPosts = this.fetchTopPosts.bind(this);\n    }\n\n    async fetchPosts() {\n        const {data, links} = await getPosts(localStorage.getItem('token'));\n        await this.setState({ posts: Object.values(data), links: links});\n      }\n    async fetchTopPosts() {\n        console.log('hola')\n        const {data, links} = await getTopPosts(localStorage.getItem('token'));\n        await this.setState({ posts: Object.values(data), links: links});\n      }\n\n    componentDidMount(){\n      this.fetchPosts()\n    }\n\n    render() {\n      let posts;\n      if (this.state.posts){\n        posts = this.state.posts.map((post, i) => {\n          console.log(this.state.posts)\n          return (\n            <tbody  key= {i}>\n              <tr>\n                <td>{post.links.freelancer}</td>\n                <td>{post.attributes.description}</td>\n                <td><img className='table-img' src={post.attributes.media} alt=\"\" /></td>\n                <td>{post.attributes.likes}</td>\n              </tr>\n            </tbody>\n          );    \n        });\n      }\n      \n      return (\n        <div>\n          <h2>Posts</h2>\n          <button onClick={this.fetchTopPosts}> Top 10 (Likes)</button>\n        \n          <table>\n            <thead>\n            <tr>\n              <th>Freelancer</th>\n              <th>Description</th>\n              <th>Media</th>\n              <th>Likes</th>\n            </tr>\n            </thead>\n            {posts}\n          </table>\n        </div>\n      );\n    }\n  }\n  \n  \n  export default Posts;"]},"metadata":{},"sourceType":"module"}