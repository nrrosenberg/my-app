{"ast":null,"code":"var _jsxFileName = \"/Users/nicorosenberg/Desktop/my-app/src/components/Login.jsx\";\nimport React, { Component } from 'react';\nimport '../styles/login.css';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.mailInput = React.createRef();\n    this.passwordInput = React.createRef();\n    this.state = {\n      mail: '',\n      password: '',\n      error: false,\n      token: ''\n    };\n    this.login = this.login.bind(this);\n  }\n\n  async login() {\n    await this.setState({\n      mail: this.mailInput.current.value,\n      password: this.passwordInput.current.value\n    });\n    const data = {\n      mail: this.state.mail,\n      password: this.state.password\n    };\n    const response = await fetch('http://localhost:3000/api/auth', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n    const {\n      token,\n      error\n    } = await response.json();\n\n    if (token) {\n      this.setState({\n        token: token,\n        error: false\n      });\n      localStorage.setItem('token', token);\n      window.location.reload(false);\n    } else {\n      this.setState({\n        token: '',\n        error: error\n      });\n      localStorage.removeItem('token');\n    }\n  }\n\n  render() {\n    let errorMsg;\n    const {\n      error\n    } = this.state;\n\n    if (error) {\n      errorMsg = /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"errorMsg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 18\n        }\n      }, \"El correo electr\\xF3nico o la contrase\\xF1a se ha introducido de forma incorrecta.\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, \"Iniciar Sesi\\xF3n\"), errorMsg, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Mail\",\n      ref: this.mailInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"Contrase\\xF1a\",\n      ref: this.passwordInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"Iniciar Sesi\\xF3n\",\n      onClick: this.login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/nicorosenberg/Desktop/my-app/src/components/Login.jsx"],"names":["React","Component","Login","constructor","props","mailInput","createRef","passwordInput","state","mail","password","error","token","login","bind","setState","current","value","data","response","fetch","method","body","JSON","stringify","json","localStorage","setItem","window","location","reload","removeItem","render","errorMsg"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../styles/login.css'\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.mailInput = React.createRef();\n    this.passwordInput = React.createRef();\n\n    this.state = {\n      mail: '',\n      password: '',\n      error: false,\n      token: '',\n    };\n\n    this.login = this.login.bind(this);\n  }\n\n\n  async login() {\n    await this.setState(\n      { mail: this.mailInput.current.value, password: this.passwordInput.current.value },\n    );\n    const data = {\n        mail: this.state.mail,\n        password: this.state.password\n    }\n    const response = await fetch('http://localhost:3000/api/auth', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n\n    const {token, error } = await response.json()\n    if (token){\n        this.setState({token: token, error: false})\n        localStorage.setItem('token', token);\n        window.location.reload(false)\n    }\n    else {\n        this.setState({token: '', error: error})\n        localStorage.removeItem('token');\n    }\n   \n  }\n\n  render() {\n    let errorMsg;\n    const { error } = this.state;\n    \n    if (error) {\n      errorMsg = <h5 className=\"errorMsg\">El correo electrónico o la contraseña se ha introducido de forma incorrecta.</h5>;\n    }\n    return (\n      <div className=\"card\">\n        <h2>Iniciar Sesión</h2>\n        {errorMsg}\n        <form>\n          <input type=\"text\" placeholder=\"Mail\" ref={this.mailInput} />\n          <input type=\"password\" placeholder=\"Contraseña\" ref={this.passwordInput} />\n          <input type=\"button\" value=\"Iniciar Sesión\" onClick={this.login} />\n        </form>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}