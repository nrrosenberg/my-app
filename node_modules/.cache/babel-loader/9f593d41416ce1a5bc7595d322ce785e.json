{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../styles/navigation.css';import'../styles/tables.css';import{getPosts,getTopPosts}from'../services/posts';import{getComments,getFreelancerName}from'../services/posts';//import { id } from 'postcss-selector-parser';\nvar Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(){var _this;_classCallCheck(this,Posts);_this=_super.call(this);_this.state={posts:'',links:'',comments:''};_this.fetchTopPosts=_this.fetchTopPosts.bind(_assertThisInitialized(_this));_this.fetchPosts=_this.fetchPosts.bind(_assertThisInitialized(_this));_this.fetchComments=_this.fetchComments.bind(_assertThisInitialized(_this));_this.fetchFreelancerName=_this.fetchFreelancerName.bind(_assertThisInitialized(_this));return _this;}_createClass(Posts,[{key:\"fetchPosts\",value:function(){var _fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getPosts,data,links;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(localStorage.getItem('token'));case 2:_yield$getPosts=_context.sent;data=_yield$getPosts.data;links=_yield$getPosts.links;_context.next=7;return this.setState({posts:data,links:links,comments:''});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function fetchPosts(){return _fetchPosts.apply(this,arguments);}return fetchPosts;}()},{key:\"fetchTopPosts\",value:function(){var _fetchTopPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getTopPosts,data,links;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getTopPosts(localStorage.getItem('token'));case 2:_yield$getTopPosts=_context2.sent;data=_yield$getTopPosts.data;links=_yield$getTopPosts.links;_context2.next=7;return this.setState({posts:data,links:links,comments:''});case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchTopPosts(){return _fetchTopPosts.apply(this,arguments);}return fetchTopPosts;}()},{key:\"fetchComments\",value:function(){var _fetchComments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(postId){var _yield$getComments,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getComments(localStorage.getItem('token'),postId);case 2:_yield$getComments=_context3.sent;data=_yield$getComments.data;this.setState({comments:data});case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function fetchComments(_x){return _fetchComments.apply(this,arguments);}return fetchComments;}()},{key:\"fetchFreelancerName\",value:function(){var _fetchFreelancerName=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(freelancerId){var _yield$getFreelancerN,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getFreelancerName(localStorage.getItem('token'),freelancerId);case 2:_yield$getFreelancerN=_context4.sent;data=_yield$getFreelancerN.data;return _context4.abrupt(\"return\",Object.values(data.attributes)[3]);case 5:case\"end\":return _context4.stop();}}},_callee4);}));function fetchFreelancerName(_x2){return _fetchFreelancerName.apply(this,arguments);}return fetchFreelancerName;}()},{key:\"render\",value:function render(){var _this2=this;var posts;if(this.state.posts){posts=this.state.posts.map(function(post,i){console.log(post.attributes.freelancerUsername);return/*#__PURE__*/React.createElement(\"tbody\",{key:i},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,post.attributes.freelancerUsername),/*#__PURE__*/React.createElement(\"td\",null,post.attributes.description),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"table-img\",src:post.attributes.media,alt:\"\"})),/*#__PURE__*/React.createElement(\"td\",null,post.attributes.likes),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-light\",onClick:function onClick(){return _this2.fetchComments(post.attributes.id);}},\" Comments\"))));});}var comments;if(this.state.comments){comments=this.state.comments.map(function(comment,i){return/*#__PURE__*/React.createElement(\"tbody\",{key:i},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,comment.attributes.freelancer),/*#__PURE__*/React.createElement(\"td\",null,comment.attributes.description)));});}return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Posts\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group list-group-horizontal-sm\"},/*#__PURE__*/React.createElement(\"li\",{className:\"\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-primary\",onClick:this.fetchTopPosts},\" Top 10 (Likes)\")),/*#__PURE__*/React.createElement(\"li\",{className:\"\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-primary\",onClick:this.fetchPosts},\" Todos los Posts\")))),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Freelancer\"),/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"Media\"),/*#__PURE__*/React.createElement(\"th\",null,\"Likes\"),/*#__PURE__*/React.createElement(\"th\",null,\"Comentarios\"))),posts),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Usuario\"),/*#__PURE__*/React.createElement(\"th\",null,\"Description\"))),comments));}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/Users/nicorosenberg/Desktop/my-app/src/components/Posts.jsx"],"names":["React","Component","getPosts","getTopPosts","getComments","getFreelancerName","Posts","state","posts","links","comments","fetchTopPosts","bind","fetchPosts","fetchComments","fetchFreelancerName","localStorage","getItem","data","setState","postId","freelancerId","Object","values","attributes","map","post","i","console","log","freelancerUsername","description","media","likes","id","comment","freelancer"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nimport '../styles/navigation.css'\nimport '../styles/tables.css'\nimport {getPosts, getTopPosts} from  '../services/posts' \nimport { getComments, getFreelancerName } from '../services/posts';\n//import { id } from 'postcss-selector-parser';\n\n\nclass Posts extends Component {\n    constructor(){\n      super()\n      this.state = {\n        posts: '',\n        links: '',\n        comments: '',\n      }\n      this.fetchTopPosts = this.fetchTopPosts.bind(this);\n      this.fetchPosts = this.fetchPosts.bind(this);\n      this.fetchComments = this.fetchComments.bind(this);\n      this.fetchFreelancerName = this.fetchFreelancerName.bind(this);\n    }\n\n    async fetchPosts() {\n        const {data, links} = await getPosts(localStorage.getItem('token'));\n        await this.setState({ posts: data, links: links, comments: ''});\n      }\n    async fetchTopPosts() {\n        const {data, links} = await getTopPosts(localStorage.getItem('token'));\n        await this.setState({ posts: data, links: links, comments: ''});\n      }\n      async fetchComments(postId) {\n        const {data} = await getComments(localStorage.getItem('token'), postId);\n        this.setState({ comments: data});\n      }\n      async fetchFreelancerName(freelancerId) {\n        const {data} = await getFreelancerName(localStorage.getItem('token'), freelancerId);\n        return (Object.values(data.attributes)[3])\n      }\n\n\n  render() {\n      let posts;\n      if (this.state.posts){\n        posts = this.state.posts.map((post, i) => {\n          console.log(post.attributes.freelancerUsername)\n  \n          return (\n            <tbody key= {i}>\n              <tr>\n                <td>{post.attributes.freelancerUsername}</td>\n                <td>{post.attributes.description}</td>\n                <td><img className='table-img' src={post.attributes.media} alt=\"\" /></td>\n                <td>{post.attributes.likes}</td>\n                <td><button className='btn btn-outline-light' onClick={()=>this.fetchComments(post.attributes.id)}> Comments</button></td>\n              </tr>\n            </tbody>\n          ); \n        });\n      }\n      let comments;\n      if (this.state.comments){\n        comments = this.state.comments.map((comment, i) => {\n          return (\n            <tbody  key= {i}>\n              <tr>\n                <td>{comment.attributes.freelancer}</td>\n                <td>{comment.attributes.description}</td>\n              </tr>\n            </tbody>\n          ); \n        });\n      }\n\n      return (\n        <div className='container'>\n          <h2>Posts</h2>\n          \n          <div>\n          <ul className=\"list-group list-group-horizontal-sm\">\n            <li className=\"\">\n              <button className='btn btn-outline-primary' onClick={this.fetchTopPosts}> Top 10 (Likes)</button>\n            </li>\n            <li className=\"\">\n              <button className='btn btn-outline-primary' onClick={this.fetchPosts}> Todos los Posts</button>\n              </li>\n          </ul>\n        </div>\n  \n          <table>\n            <thead>\n            <tr>\n              <th>Freelancer</th>\n              <th>Description</th>\n              <th>Media</th>\n              <th>Likes</th>\n              <th>Comentarios</th>\n            </tr>\n            </thead>\n            {posts}\n          </table>\n\n          <table>\n            <thead>\n            <tr>\n              <th>Usuario</th>\n              <th>Description</th>\n              \n            </tr>\n            </thead>\n            {comments}\n          </table>\n        </div>\n      )\n  }\n}\n  \n  \nexport default Posts;"]},"metadata":{},"sourceType":"module"}