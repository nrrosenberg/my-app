{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicorosenberg/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";function getPosts(_x){return _getPosts.apply(this,arguments);}function _getPosts(){_getPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token){var response,_yield$response$json,data,links;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://arcane-cove-93049.herokuapp.com/api/posts',{headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:_yield$response$json=_context2.sent;data=_yield$response$json.data;links=_yield$response$json.links;data=Object.values(data);_context2.next=11;return data.map(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(post,i){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getFreelancerName(token,Object.values(post.attributes)[1]);case 2:post.attributes['freelancerUsername']=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x7,_x8){return _ref.apply(this,arguments);};}());case 11:return _context2.abrupt(\"return\",{data:data,links:links});case 12:case\"end\":return _context2.stop();}}},_callee2);}));return _getPosts.apply(this,arguments);}function getTopPosts(_x2){return _getTopPosts.apply(this,arguments);}function _getTopPosts(){_getTopPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(token){var response,_yield$response$json2,data,links;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch('http://arcane-cove-93049.herokuapp.com/api/posts/top',{headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:_yield$response$json2=_context4.sent;data=_yield$response$json2.data;links=_yield$response$json2.links;_context4.next=10;return Object.values(data);case 10:data=_context4.sent;_context4.next=13;return data.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(post,i){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getFreelancerName(token,Object.values(post.attributes)[1]);case 2:post.attributes['freelancerUsername']=_context3.sent;case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x9,_x10){return _ref2.apply(this,arguments);};}());case 13:return _context4.abrupt(\"return\",{data:data,links:links});case 14:case\"end\":return _context4.stop();}}},_callee4);}));return _getTopPosts.apply(this,arguments);}function getComments(_x3,_x4){return _getComments.apply(this,arguments);}function _getComments(){_getComments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(token,postId){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"http://arcane-cove-93049.herokuapp.com/api/posts/comments/\".concat(postId),{headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context5.sent;return _context5.abrupt(\"return\",response.json());case 4:case\"end\":return _context5.stop();}}},_callee5);}));return _getComments.apply(this,arguments);}function getFreelancerName(_x5,_x6){return _getFreelancerName.apply(this,arguments);}function _getFreelancerName(){_getFreelancerName=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(token,freelancerId){var response,_yield$response$json$,data,username;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(\"http://arcane-cove-93049.herokuapp.com/api/freelancers/show/\".concat(freelancerId),{headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context6.sent;_context6.next=5;return response.json().then();case 5:_yield$response$json$=_context6.sent;data=_yield$response$json$.data;username=Object.values(data.attributes)[3];return _context6.abrupt(\"return\",username);case 9:case\"end\":return _context6.stop();}}},_callee6);}));return _getFreelancerName.apply(this,arguments);}export{getPosts,getTopPosts,getComments,getFreelancerName};","map":{"version":3,"sources":["/Users/nicorosenberg/Desktop/my-app/src/services/posts.js"],"names":["getPosts","token","fetch","headers","Authorization","response","json","data","links","Object","values","map","post","i","getFreelancerName","attributes","getTopPosts","getComments","postId","freelancerId","then","username"],"mappings":"iPACeA,CAAAA,Q,oIAAf,kBAAwBC,KAAxB,0LAC2BC,CAAAA,KAAK,CAAC,kDAAD,CAAoD,CAChFC,OAAO,CAAE,CAACC,aAAa,kBAAYH,KAAZ,CAAd,CADuE,CAApD,CADhC,QACUI,QADV,uCAI8BA,CAAAA,QAAQ,CAACC,IAAT,EAJ9B,4CAISC,IAJT,sBAISA,IAJT,CAIeC,KAJf,sBAIeA,KAJf,CAKID,IAAI,CAAGE,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAP,CALJ,wBAMUA,CAAAA,IAAI,CAACI,GAAL,0FAAS,iBAAOC,IAAP,CAAaC,CAAb,wIACmCC,CAAAA,iBAAiB,CAACb,KAAD,CAAQQ,MAAM,CAACC,MAAP,CAAcE,IAAI,CAACG,UAAnB,EAA+B,CAA/B,CAAR,CADpD,QACXH,IAAI,CAACG,UAAL,CAAgB,oBAAhB,CADW,qEAAT,oEANV,0CASW,CAACR,IAAI,CAAJA,IAAD,CAAOC,KAAK,CAALA,KAAP,CATX,2D,mDAYeQ,CAAAA,W,8IAAf,kBAA2Bf,KAA3B,2LAC2BC,CAAAA,KAAK,CAAC,sDAAD,CAAwD,CACpFC,OAAO,CAAE,CAACC,aAAa,kBAAYH,KAAZ,CAAd,CAD2E,CAAxD,CADhC,QACUI,QADV,uCAI8BA,CAAAA,QAAQ,CAACC,IAAT,EAJ9B,6CAISC,IAJT,uBAISA,IAJT,CAIeC,KAJf,uBAIeA,KAJf,yBAKiBC,CAAAA,MAAM,CAACC,MAAP,CAAcH,IAAd,CALjB,SAKIA,IALJ,wCAMUA,CAAAA,IAAI,CAACI,GAAL,2FAAS,kBAAOC,IAAP,CAAaC,CAAb,6IACmCC,CAAAA,iBAAiB,CAACb,KAAD,CAAQQ,MAAM,CAACC,MAAP,CAAcE,IAAI,CAACG,UAAnB,EAA+B,CAA/B,CAAR,CADpD,QACXH,IAAI,CAACG,UAAL,CAAgB,oBAAhB,CADW,wEAAT,sEANV,0CAWW,CAACR,IAAI,CAAJA,IAAD,CAAOC,KAAK,CAALA,KAAP,CAXX,2D,sDAceS,CAAAA,W,kJAAf,kBAA2BhB,KAA3B,CAAkCiB,MAAlC,0JAC2BhB,CAAAA,KAAK,qEAA8DgB,MAA9D,EAAuE,CACnGf,OAAO,CAAE,CAACC,aAAa,kBAAYH,KAAZ,CAAd,CAD0F,CAAvE,CADhC,QACUI,QADV,iDAIWA,QAAQ,CAACC,IAAT,EAJX,0D,sDAOeQ,CAAAA,iB,oKAAf,kBAAiCb,KAAjC,CAAwCkB,YAAxC,8LACyBjB,CAAAA,KAAK,uEAAgEiB,YAAhE,EAA+E,CACzGhB,OAAO,CAAE,CAACC,aAAa,kBAAYH,KAAZ,CAAd,CADgG,CAA/E,CAD9B,QACQI,QADR,uCAIuBA,CAAAA,QAAQ,CAACC,IAAT,GAAgBc,IAAhB,EAJvB,6CAISb,IAJT,uBAISA,IAJT,CAKUc,QALV,CAKqBZ,MAAM,CAACC,MAAP,CAAcH,IAAI,CAACQ,UAAnB,EAA+B,CAA/B,CALrB,kCAMWM,QANX,0D,oDAUA,OAAQrB,QAAR,CAAkBgB,WAAlB,CAA+BC,WAA/B,CAA4CH,iBAA5C","sourcesContent":["\nasync function getPosts(token) {\n    const response = await fetch('http://arcane-cove-93049.herokuapp.com/api/posts',{\n    headers: {Authorization: `Bearer ${token}`} \n    });\n    let {data, links} = await response.json()\n    data = Object.values(data);\n    await data.map(async (post, i)=>{\n        post.attributes['freelancerUsername'] = await getFreelancerName(token ,Object.values(post.attributes)[1])\n    });\n    return {data, links}    \n}\n\nasync function getTopPosts(token) {\n    const response = await fetch('http://arcane-cove-93049.herokuapp.com/api/posts/top',{\n    headers: {Authorization: `Bearer ${token}`} \n    });\n    let {data, links} = await response.json()\n    data = await Object.values(data);\n    await data.map(async (post, i)=>{\n        post.attributes['freelancerUsername'] = await getFreelancerName(token ,Object.values(post.attributes)[1])\n        \n    });\n\n    return {data, links}\n}\n\nasync function getComments(token, postId) {\n    const response = await fetch(`http://arcane-cove-93049.herokuapp.com/api/posts/comments/${postId}`,{\n    headers: {Authorization: `Bearer ${token}`} \n    });\n    return response.json();\n}\n\nasync function getFreelancerName(token, freelancerId) {\n    let response = await fetch(`http://arcane-cove-93049.herokuapp.com/api/freelancers/show/${freelancerId}`,{\n    headers: {Authorization: `Bearer ${token}`} \n    });\n    let {data} = await response.json().then();\n    const username = Object.values(data.attributes)[3]\n    return username\n\n}\n\nexport {getPosts, getTopPosts, getComments, getFreelancerName};"]},"metadata":{},"sourceType":"module"}