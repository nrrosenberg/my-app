(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},11:function(t,e,a){t.exports=a(17)},17:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),c=a(1),l=a.n(c),i=a(2),u=a(4),p=a(5),h=a(3),m=a(6),f=a(7),d=a(10),v=a.n(d);function b(t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3000/api/posts",{headers:{Authorization:"Bearer ".concat(e)}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3000/api/posts/top",{headers:{Authorization:"Bearer ".concat(e)}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E=function(t){Object(f.a)(a,t);var e=Object(m.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={posts:"",links:""},t.fetchTopPosts=t.fetchTopPosts.bind(Object(h.a)(t)),t}return Object(p.a)(a,[{key:"fetchPosts",value:function(){var t=Object(i.a)(l.a.mark((function t(){var e,a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(localStorage.getItem("token"));case 2:return e=t.sent,a=e.data,n=e.links,t.next=7,this.setState({posts:Object.values(a),links:n});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchTopPosts",value:function(){var t=Object(i.a)(l.a.mark((function t(){var e,a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("hola"),t.next=3,g(localStorage.getItem("token"));case 3:return e=t.sent,a=e.data,n=e.links,t.next=8,this.setState({posts:Object.values(a),links:n});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var t,e=this;return this.state.posts&&(t=this.state.posts.map((function(t,a){return console.log(e.state.posts),r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,t.links.freelancer),r.a.createElement("td",null,t.attributes.description),r.a.createElement("td",null,r.a.createElement("img",{className:"table-img",src:t.attributes.media,alt:""})),r.a.createElement("td",null,t.attributes.likes)))}))),r.a.createElement("div",null,r.a.createElement("h2",null,"Posts"),r.a.createElement("button",{onClick:this.fetchTopPosts}," Top 10 (Likes)"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Freelancer"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Media"),r.a.createElement("th",null,"Likes"))),t))}}]),a}(n.Component),y=function(t){Object(f.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).mailInput=r.a.createRef(),n.passwordInput=r.a.createRef(),n.state={mail:"",password:"",error:!1,token:""},n.login=n.login.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"login",value:function(){var t=Object(i.a)(l.a.mark((function t(){var e,a,n,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState({mail:this.mailInput.current.value,password:this.passwordInput.current.value});case 2:return e={mail:this.state.mail,password:this.state.password},t.next=5,fetch("http://localhost:3000/api/auth",{method:"POST",body:JSON.stringify(e)});case 5:return a=t.sent,t.next=8,a.json();case 8:n=t.sent,r=n.token,s=n.error,r?(this.setState({token:r,error:!1}),localStorage.setItem("token",r),window.location.reload(!1)):(this.setState({token:"",error:s}),localStorage.removeItem("token"));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t;return this.state.error&&(t=r.a.createElement("h5",{className:"errorMsg"},"El correo electr\xf3nico o la contrase\xf1a se ha introducido de forma incorrecta.")),r.a.createElement("div",{className:"card"},r.a.createElement("h2",null,"Iniciar Sesi\xf3n"),t,r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"Mail",ref:this.mailInput}),r.a.createElement("input",{type:"password",placeholder:"Contrase\xf1a",ref:this.passwordInput}),r.a.createElement("input",{type:"button",value:"Iniciar Sesi\xf3n",onClick:this.login})))}}]),a}(n.Component),j=function(t){Object(f.a)(a,t);var e=Object(m.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={token:"",status:""},t.logout=t.logout.bind(Object(h.a)(t)),t.changeState=t.changeStatus.bind(Object(h.a)(t)),t}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({token:localStorage.getItem("token"),status:localStorage.getItem("status")});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"logout",value:function(){var t=Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:window.location.reload(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"changeStatus",value:function(){var t=Object(i.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState({status:e});case 2:return t.next=4,localStorage.setItem("status",e);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,a,n=this;return this.state.token?(e=r.a.createElement("button",{className:"nav-btn",onClick:this.logout}," LogOut"),"posts"===this.state.status&&(a=r.a.createElement(E,null))):t=r.a.createElement(y,null),r.a.createElement("div",null,r.a.createElement("nav",{className:'"navbar navbar-expand-lg navbar-dark bg-dark"'},r.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),r.a.createElement("button",{className:"nav-btn",onClick:function(){return n.changeStatus("posts")}},"Posts"),r.a.createElement("button",{className:"nav-btn",onClick:function(){return n.changeStatus("freelancers")}},"Freelancers"),e),a,t)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.f8ceaeab.chunk.js.map